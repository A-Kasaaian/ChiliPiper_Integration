<!-- START OF SCRIPT FOR TENANT -->
<!-- Script for tenant to include on the landing page, includes marketing.js -->
<script src="https://js.chilipiper.com/marketing.js" type="text/javascript" async=""></script>
<script>
  // Tenant and router
  const tenantDomain = "domain"; // REPLACE
  const routerName = "router-name"; // REPLACE
  // Form ID
  const formID = "hsForm_c2700ee5-f87d-4e85-af26-ac4bc33b01c4"; // REPLACE

  // Find active web forms
  var activeForm = document.getElementById(formID);
  // Add event listener to submit
  if (activeForm) {
    activeForm.addEventListener("submit", handlerSubmit);
  } else {
    console.log(`no active forms found with formID ${formID}`);
  }
  function handlerSubmit() {
    var leadObj = {};
    var elements = activeForm.elements;
    // Validate required form input values
    for (var i = 0, element; (element = elements[i++]); ) {
      if ((element.required || element.className.includes("mktoRequired")) && element.value === "") {
        console.log("form validation failed, some required fields are empty");
        return;
      }
      // Map to lead object
      switch (element.type) {
        // Skip buttons
        case "button" || "submit":
          continue;
        // Handle checkboxes
        case "checkbox":
          if (element.checked && leadObj[element.name]) {
            leadObj[element.name] = leadObj[element.name] += ";" + element.value;
          } else if (element.checked) {
            leadObj[element.name] = element.value;
          }
          continue;
        // All other inputs
        default:
          if (element.value) {
            leadObj[element.name] = element.value;
          }
          continue;
      }
    }
    //Call Chili Piper if validation passed
    console.log(leadObj);
    var leadFixed = {
      FirstName: leadObj.firstname,
      LastName: leadObj.lastname,
      Email: leadObj.email,
      Phone: leadObj.phone,
      NAPT__c: leadObj.rental_property_type,
      Customer_Profile__c: leadObj.customer_profile,
      Are_you_a_U_S_or_Canadian_citizen__c: leadObj.nac__c,
      Stage__c: leadObj.stage__c,
      Property_City__c: leadObj.property_city,
      Property_State__c: leadObj.property_state,
      Property_Country__c: leadObj.property_country,
      Will_rent_property_4_weeks_annually__c: leadObj.will_rent_property_4__weeks_annually_,
    };
    console.log(leadFixed);
    ChiliPiper.submit(tenantDomain, routerName, {
      map: true,
      lead: leadFixed,
    });
    return;
  }
</script>
<!-- END OF SCRIPT FOR TENANT -->
