<!-- Add the following code to the footer of your landing page with the form -->
<script src="https://js.chilipiper.com/marketing.js" type="text/javascript"></script>
<script>
  const cpTenantDomain = "[[cp_domain]]"; // REPLACE
  const cpRouterName = "[[cp_router]]"; // REPLACE
  //
  // No changes needed from this point
  //
  // Listen for form submitted message
  window.addEventListener("message", (event) => {
    if (event.data.type === "hsFormCallback" && event.data.eventName === "onFormSubmit") {
      var lead = event.data.data.reduce((obj, item) => Object.assign(obj, { [item.name]: item.value }), {});
      console.log(lead);
      ChiliPiper.submit(cpTenantDomain, cpRouterName, {
        map: true,
        lead: lead,
      });
    }
  });
</script>
