<script>
  const formID = ""; // REPLACE -- can be left blank to grab the first form on the page
  const tenantDomain = "[[domain]]"; // REPLACE and remove square brackets
  const tenantRouter = "[[router_name]]"; // REPLACE and remove square brackets
  const thankYouPageURL = "[[success_location]]"; // REPLACE and remove square brackets
  //
  // No changes should be necessary from this point
  //
  function submitHandler(event) {
    // Add URL parameters to form action
    const params = new URLSearchParams(getLeadObject(tenantDomain, tenantRouter, form));
    params.append("success_location", `${thankYouPageURL}?${params.toString()}`);
    params.form.action = `${form.action}?${params.toString()}`;
  }
  // Get form
  var form = formID ? document.querySelector(formID) : document.forms?.[0];
  addFormListener();
  // Retry adding the form event listener
  var count = 1;
  function addFormListener() {
    count++;
    if (form) {
      form.addEventListener("submit", submitHandler);
      return;
    } else if ((typeof retryFormSearch !== "undefined" ? retryFormSearch : true) && count < 10) {
      setTimeout(() => {
        form = formID ? document.querySelector(formID) : document.forms?.[0];
        addFormListener();
      }, 1000);
    } else {
      console.log("no form found on this page, id used - " + formID || "-blank-");
      return;
    }
  }
</script>
